<% include ./header.ejs %>
<link rel="stylesheet" href="<%- serve.staticPath %>/css/about.css">

<section class="news-detail">
  <div class="news-detail-head">
    <h1 class="news-title"><%- nodeData.data.title || '' %></h1>
    <div class="new-aside">
      <i class="icon-2"></i>
      <span class="news-date"><%- nodeData.data.published_at || '' %></span>
    </div>
  </div>
  <div class="news-detail-con">
    <%- serve.striptags(nodeData.data.extended,['img','a','br','b','em','strong'], '\n') %>
  </div>
</section>
<script>
  // resizePic()
  function resizePic() {
    $('.news-detail-con img').each(function () {
      var maxWidth = 450; // 图片最大宽度
      var maxHeight = 750;    // 图片最大高度
      var ratio = 0;  // 缩放比例

      var width = $(this).width();    // 图片实际宽度
      var height = $(this).height();  // 图片实际高度
      // console.log(width,height)
      // $(this).removeAttr("width")
      // $(this).removeAttr("height")
      // $(this).css("width", width);
      // $(this).css("height", height);
      // $(this).attr("width", width);
      // $(this).attr("height", height);

      // // 检查图片是否超宽
      // if (width > maxWidth) {
      //   //计算缩放比例
      //   ratio = maxWidth / width;
      //   $(this).css("width", maxWidth); // 设定实际显示宽度
      //   height = height * ratio;    // 计算等比例缩放后的高度
      //   $(this).css("height", height);  // 设定等比例缩放后的高度
      // }
      //
      // // 检查图片是否超高
      // if (height > maxHeight) {
      //   ratio = maxHeight / height;
      //   $(this).css("height", maxHeight);   // 设定实际显示高度
      //   width = width * ratio;    // 计算等比例缩放后的高度
      //   $(this).css("width", width * ratio);    // 设定等比例缩放后的高度
      // }
    });

  }
</script>
<style>
  .news-detail .news-detail-con img {
    /* margin: 15px 0; */
    width: 100%;
    height: auto;
    margin: 15px 0;
  }
</style>
<% include ./footer.ejs %>
